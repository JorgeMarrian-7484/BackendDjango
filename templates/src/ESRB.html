{% extends 'index.html' %}
{% block contenido %}

{% if messages %}
    
    {% for msj in messages %}
        <script>
            Swal.fire('{{ msj }}','','success').then(()=>{
                window.location.href = '{{ ruta }}'
            })
        </script>
    {% endfor %}
        
{% endif %}

<h2 class="alert alert-dark text-center mt-3">{{ titulo }}</h2>
<div class="mt-3 text-end mb-3">
    <a href="{% url 'crearesrb' %}" class="btn btn-success">Añadir ESRB</a>
</div>
    {% if esrb %}
    <table class="table table-bordered table-hover">
        <thead class="table-dark">
            <tr>
                <th>ESRB</th>
                <th></th>
            </tr>
        </thead>
        <tbody>        
            {% for es in esrb %}
                <tr>
                    <td>{{es.clasificacion}}</td>
                    <td class="col-2 text-center">
                        <a href="{% url 'editar_esrb' es.id %}" class="btn btn-warning">Editar</a>
                        <button onclick="eliminar('{{es.id}}')"class="btn btn-danger">Eliminar</button>
                    </td>
                </tr>
            {% endfor %}            
        </tbody>
    </table>
    <script>
        const eliminar = (id) => {
            Swal.fire({
                title: "¿Estás seguro de eliminar registro?",
                text: "No podrás revertir los cambios",
                icon: "error",
                showCancelButton: true,
                confirmButtonColor: "#d33",
                cancelButtonColor: "#3085d6",
                confirmButtonText: "Eliminar"
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/src/esrb/eliminar/' + id
                }
            });
        }
    </script>
    {% else %}
    <p class="alert alert-warning">No hay clasificacion registrada</p>
    {% endif %}
    <a href="{% url 'inicio' %}" class="btn btn-outline-dark">Volver</a>
{% endblock %}